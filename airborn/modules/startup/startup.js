-1!==navigator.userAgent.indexOf("Edge")&&alert("Sorry, Edge is not supported. Please use Chrome or Firefox.");setTitle("");openWindow("/modules/window_manager/index.html",function(a){a.addEventListener("load",function c(){a.removeEventListener("load",c);a.addEventListener("load",function e(){a.removeEventListener("load",e);getServerMessages();update();setInterval(update,36E5)})})});var messageCallbacks={};
window.addEventListener("message",function(a){if(a.data.inReplyTo)messageCallbacks[a.data.inReplyTo].apply(this,a.data.result);else if(a.source===mainWindow||a.data.apikey&&isValidAPIKey(a.data.apikey)){if(a.source!==mainWindow&&!hasPermission(a.data.apikey,a.data.action.split(".")[1],a.data.args))throw"fs.getFile"===a.data.action?a.source.postMessage({inReplyTo:a.data.messageID,result:[null,{status:0,statusText:"Permission denied."}]},"*"):"fs.putFile"===a.data.action?a.source.postMessage({inReplyTo:a.data.messageID,
result:[{status:0,statusText:"Permission denied."}]},"*"):"fs.prepareFile"===a.data.action||"fs.prepareString"===a.data.action?a.source.postMessage({inReplyTo:a.data.messageID,result:[""]},"*"):"fs.prepareUrl"===a.data.action&&a.source.postMessage({inReplyTo:a.data.messageID,result:[a.data.args[0]]},"*"),Error("Permission denied: "+a.data.action+"("+a.data.args.map(JSON.stringify).join(", ")+")");if(-1!=="fs.getFile fs.putFile fs.prepareFile fs.prepareString fs.prepareUrl fs.startTransaction fs.endTransaction fs.listenForFileChanges fs.getObjectLocation fs.pushRegister fs.pushUnregister apps.installPackage core.setTitle core.setIcon core.logout".split(" ").indexOf(a.data.action))window[a.data.action.split(".")[1]].apply(window,
a.data.args.concat(function(){a.source.postMessage({inReplyTo:a.data.messageID,result:[].slice.call(arguments)},"*")},function(){a.source.postMessage({inReplyTo:a.data.messageID,result:[].slice.call(arguments),progress:!0},"*")},function(b,c){var d=guid();a.source.postMessage({action:"createObjectURL",args:[b],messageID:d},"*");messageCallbacks[d]=c}));else if("core.openWindowTop"===a.data.action)window.openWindowTop(a.data.args,APIKeys[a.data.apikey].appName,function(b){a.source.postMessage({inReplyTo:a.data.messageID,
result:[b]},"*",[b])});else if("wm."===a.data.action.substr(0,3))"wm.hideProgress"===a.data.action&&(window.wmLoaded=!0);else throw new TypeError("Unknown action: "+a.data.action);}});loadSettings();
