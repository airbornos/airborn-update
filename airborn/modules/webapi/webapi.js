(function(){function ia(){return([1E7]+-1E3+-4E3+-8E3+-1E11).replace(/[018]/g,function(a){return(a^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}function f(a){var b=a.split("."),c=airborn;b.slice(0,-1).forEach(function(a){c[a]||(c[a]={});c=c[a]});c[b[b.length-1]]=function(){var b=[].slice.call(arguments),c=b.map(function(a){return Object.prototype.toString.call(a)}).indexOf("[object Function]");-1===c&&(c=b.length);B(a,b.slice(0,c),b[c],b[c+1])}}function l(a,b,c,d){try{Object.defineProperty(a,
b,d)}catch(e){}Object.defineProperty(a,c,d)}function H(a,b,c,d){var e=Object.getOwnPropertyDescriptor(a,b);l(a,b,c,d(e&&e.get||function(){return this[b]},e&&e.set||function(a){this[b]=a}))}function g(a,b){Object.defineProperty(Object.prototype,b,{get:function(){return this[a]},set:function(b){this[a]=b}});Object.defineProperty(U,b,{get:function(){return this[a]},set:function(b){this[a]=b}})}function ja(a,b){m[a]?m[a].result?b.apply(this,m[a].result):m[a].push(b):(m[a]=[b],airborn.fs.prepareUrl(a,
{rootParent:k,relativeParent:I,appData:V,apikey:W},function(){var b=arguments;m[a].forEach(function(a){a.apply(this,b)});m[a].result=b}))}function ka(a){["src","href","icon"].forEach(function(b){Array.prototype.forEach.call(a.querySelectorAll("["+b+"]:not(["+b+'^="blob:"]):not(['+b+'^="data:"]):not(['+b+'^="http:"]):not(['+b+'^="https:"])'),function(a){var d=a.getAttribute(b);d&&!C.test(d)&&(a["airborn_"+b]=d)})})}function w(){var a={};this.addEventListener=function(b,c){a[b]||(a[b]=[]);a[b].push(c)};
this.removeEventListener=function(b,c){a[b]&&(a[b]=c?a[b].filter(function(a){return a!==c}):[])};this.dispatchEvent=function(b){var c=this;setTimeout(function(){Object.defineProperty(b,"target",{get:function(){return c}});a[b.type]&&a[b.type].forEach(function(a){a.call(c,b)});if(c["on"+b.type])c["on"+b.type](b)});return!0}}function h(){w.call(this);this.readyState="pending"}function X(){h.call(this)}function n(a){w.call(this);Object.defineProperty(this,"storageName",{value:a});Object.defineProperty(this,
"default",{value:!0});var b=this;airborn.fs.listenForFileChanges(r[a],function(a,d){if("/"!==a.substr(-1)&&!/\.history\//.test(a)){var e=new Event("change");Object.defineProperty(e,"path",{value:O(a)});Object.defineProperty(e,"reason",{value:d});b.dispatchEvent(e)}})}function J(a,b){if("/"===b[0]){var c=b.split("/");return r[c[1]]?r[c[1]]+c.slice(2).join("/"):b}return r[a.storageName]+b}function O(a){var b=a.split("/");Object.keys(r).forEach(function(a){r[a]==="/"+b[1]+"/"&&(b[1]=a)});return b.join("/")}
function P(a){var b=this;Object.keys(a).forEach(function(c){b[c]=a[c]})}function Q(a,b){var c=FileReader.prototype[a];FileReader.prototype[a]=function(a){if(a instanceof P){var e=this;b(a,function(a){l(e,"result","airborn_result",{get:function(){return a}});setTimeout(function(){e.dispatchEvent(new Event("load"))})})}else c.apply(this,arguments)}}function t(a){var b=this;Object.keys(a).forEach(function(c){b[c]=a[c]})}function K(){var a=JSON.stringify(u);a!==Y&&(airborn.fs.putFile(V+"localStorage",
a),Y=a)}function Z(a,b){var c=new URL(a,"file://"+(b||"")),c={host:"",hostname:"",href:c.href.substr(7),origin:"null",pathname:c.pathname,port:"",protocol:"file:",search:c.search};Object.defineProperty(c,"hash",{get:function(){return window.location.hash},set:function(a){window.location.hash=a}});c.reload=window.location.reload.bind(window.location);return c}function D(a,b){v=Z(b,v.href);Object.defineProperty(History.prototype,"state",{value:a,enumerable:!0,configurable:!0})}function la(a){Object.defineProperty(this,
"airborn_top",{value:function(){for(var b=a;b.parent.parent.parent!==b.parent.parent;)b=b.parent;return b===a?this:x(b)}()});Object.defineProperty(this,"airborn_parent",{value:this===this.airborn_top||a.parent===a?this:x(a.parent)});this.postMessage=function(){a.postMessage.apply(a,arguments)};this.focus=function(){a.focus.apply(a,arguments)};Object.defineProperty(this,"location",{get:function(){return a.location},set:function(b){a.location=b}})}function L(a){if(R.has(a))return R.get(a);var b=new la(a);
R.set(a,b);return b}function x(a){try{if(void 0===a.location.href)throw 0;}catch(b){return L(a)}return a}function aa(){w.call(this)}function ba(a,b){E[a]&&E[a].forEach(function(a){a(b)})}var k=document.rootParent;delete document.rootParent;var I=document.relativeParent;delete document.relativeParent;var V=k.replace("Apps","AppData").replace("Core","CoreData"),M=k.substr(0,k.length-1);Object.defineProperty(document,"baseURI",{get:function(){return I.replace(M,"")}});var F=document.filenames;delete document.filenames;
var y={},W=document.apikey;delete document.apikey;var B=function(a,b,c,d,e){var A=ia();("wm."===a.substr(0,3)?window.parent:window.top).postMessage({messageID:A,action:a,args:b,apikey:W},"*",e);y[A]=c;y[A]&&(y[A].progress=d,y[A].listener="fs.listenForFileChanges"===a||"fs.pushRegister"===a||"fs.prepare"===a.substr(0,10)||"core.openWindowTop"===a)};window.addEventListener("message",function(a){if(a.airborn_source===L(window.top)||a.airborn_source===L(window.parent))if(a.data.inReplyTo){var b=y[a.data.inReplyTo];
void 0!==b&&a.data.progress&&(b=b.progress);void 0!==b&&(b.apply(window,a.data.result),a.data.progress||b.listener||(y[a.data.inReplyTo]=null))}else{if(a.data.action)if("createObjectURL"===a.data.action){var b=a.data.args[0],c;try{c=new File([b.data],b.name,{type:b.type})}catch(d){c=new Blob([b.data],{type:b.type})}c=URL.createObjectURL(c);F[c]=b.name;a.source.postMessage({inReplyTo:a.data.messageID,result:[c]},"*")}else airborn.listeners[a.data.action+"Request"].forEach(function(b){b.apply(airborn,
a.data.args)})}else window.parent!==window.top&&(-1!==[].map.call(document.getElementsByTagName("iframe"),function(a){return a.contentWindow}).indexOf(a.source)?a.data.action&&B(a.data.action,a.data.args,function(){a.source.postMessage({inReplyTo:a.data.messageID,result:[].slice.call(arguments)},"*")},function(){a.source.postMessage({inReplyTo:a.data.messageID,result:[].slice.call(arguments),progress:!0},"*")},a.data.args.filter(function(a){return a instanceof ArrayBuffer})):console.info("unknown source"))},
!1);airborn=laskya={listeners:{openFileRequest:[]},addEventListener:function(a,b){airborn.listeners[a].push(b)}};f("wm.focus");f("wm.reportClicked");f("wm.setTitle");f("wm.setIcon");f("wm.openFile");f("wm.openWindow");f("wm.showProgress");f("wm.setProgress");f("wm.hideProgress");f("fs.getFile");f("fs.putFile");f("fs.prepareFile");f("fs.prepareString");f("fs.prepareUrl");f("fs.startTransaction");f("fs.endTransaction");f("fs.listenForFileChanges");f("fs.getObjectLocation");f("fs.pushRegister");f("fs.pushUnregister");
f("core.openWindowTop");window.parent===window.top&&(f("core.setTitle"),f("core.setIcon"),f("core.logout"),airborn.wm=airborn.core);var p={},ca={},ma=airborn.fs.getFile;airborn.fs.getFile=function(a,b,c){if("function"===typeof b||void 0===b)c=b,b={};void 0===c&&(c=function(){});var d=JSON.stringify(b);p[a]||(p[a]={});if(p[a][d])c.apply(this,p[a][d]);else{var e=a.substr(0,k.length)===k?k:(a.match(/\/[^\/]*\//)||["/"])[0];ca[e]||(ca[e]=!0,airborn.fs.listenForFileChanges(e,function(a){p[a]={}}));ma(a,
b,function(){p[a][d]||(p[a][d]=arguments);c.apply(this,p[a][d])})}};var na=airborn.fs.putFile;airborn.fs.putFile=function(){var a=[].slice.call(arguments);if(a[1]instanceof Blob)throw new TypeError('You have to pass putFile(name, {codec: "blob"}, blob).');if(a[2]instanceof Blob){if(!a[1]||"blob"!==a[1].codec)throw new TypeError('You have to pass putFile(name, {codec: "blob"}, blob).');var b=a[2];if("function"===typeof a[3]||void 0===a[3])a[5]=a[4],a[4]=a[3],a[3]={};a[3].type=b.type;var c=new FileReader;
c.onload=function(){var b=this.result;a[2]=b;a[1].codec="arrayBuffer";navigator.userAgent.match(/Safari/)&&!navigator.userAgent.match(/Chrome/)?B("fs.putFile",a.slice(0,4),a[4],a[5]):B("fs.putFile",a.slice(0,4),a[4],a[5],[b])};c.readAsArrayBuffer(b)}else na.apply(this,arguments)};navigator.mozApps={};navigator.mozApps.installPackage=function(){var a=[].slice.call(arguments),b=new h;B("apps.installPackage",a,function(a,d){d?(b.error=d,b.dispatchEvent(new Event("error"))):(b.result=a,b.dispatchEvent(new Event("success")))});
return b};window.addEventListener("mousedown",function(){window.parent!==window.top&&(airborn.wm.focus(),airborn.wm.reportClicked())},!0);var N=/[?#].*$/,C=/^(?!airbornstorage)[a-z]+:/i,oa=/^[a-z]+:/i,U=Object.create(null),pa=Object.create;Object.create=function(a){null===a&&(a=U);return pa.apply(this,arguments)};var qa=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(a,b){var c=a.toUpperCase(),d;if("data://"===b.substr(0,7)&&-1===b.indexOf(",")||"blob://"===b.substr(0,7))b=b.substr(7);
if("GET"!==c||C.test(b))"HEAD"!==c||C.test(b)?"HEAD"===c&&"data:"===b.substr(0,5)?(this.setRequestHeader=function(){console.log(this,arguments)},this.overrideMimeType=function(){console.log(this,arguments)},this.send=function(){var a=this,c=b.substr(5).split(","),d=-1===c[0].indexOf("base64")?decodeURIComponent(c[1]):atob(c[1].replace(/-/g,"+").replace(/_/g,"/")),e=a.getResponseHeader;a.getResponseHeader=function(a){return"Content-Length"===a?d.length:e.apply(this,arguments)};l(a,"readyState","airborn_readyState",
{get:function(){return 4}});l(a,"status","airborn_status",{get:function(){return 200}});setTimeout(function(){a.dispatchEvent(new Event("readystatechange"));a.dispatchEvent(new Event("load"))})}):("data:"===b.substr(0,5)&&console.log(c,b),qa.apply(this,arguments)):(this.airbornFile=!0,this.setRequestHeader=function(){console.log(this,arguments)},this.overrideMimeType=function(){console.log(this,arguments)},this.send=function(){var a=this;b=b.replace(/^file:(?:\/\/)?/,"");b=b.replace(N,"");b=k+airborn.path.resolve("/",
b).substr(1).replace(/^(\.\.\/)+/,"");"/"===b.substr(-1)&&(b+="index.html");airborn.fs.getFile(airborn.path.dirname(b),{codec:"dir"},function(c,d){var e=a.getResponseHeader;a.getResponseHeader=function(a){return"Content-Length"===a?c[airborn.path.basename(b)].size:e.apply(this,arguments)};l(a,"readyState","airborn_readyState",{get:function(){return 4}});l(a,"status","airborn_status",{get:function(){return!d&&200}});setTimeout(function(){a.dispatchEvent(new Event("readystatechange"));a.dispatchEvent(new Event("load"))})})});
else{this.airbornFile=!0;this.setRequestHeader=function(){console.log(this,arguments)};var e;this.overrideMimeType=function(a){console.log(this,arguments);"text"!==a.split("/")[0]&&(console.log("codec = 'arrayBuffer';"),e="arrayBuffer")};l(this,"responseType","airborn_responseType",{set:function(a){console.log(this,arguments);console.log("codec = '"+a+"';");"arraybuffer"===a?e="arrayBuffer":"json"===a?e="json":d=a}});this.send=function(){var a=this;b=b.replace(/^file:(?:\/\/)?/,"");b=b.replace(N,
"");b=k+airborn.path.resolve("/",b).substr(1).replace(/^(\.\.\/)+/,"");"/"===b.substr(-1)&&(b+="index.html");airborn.fs.getFile(b,{codec:e},function(c,f){l(a,"readyState","airborn_readyState",{get:function(){return 4}});l(a,"status","airborn_status",{get:function(){return!f&&200}});l(a,"response","airborn_response",{get:function(){if("document"===d){var a=document.implementation.createHTMLDocument("");Object.defineProperty(a,"baseURI",{get:function(){return b.replace(M,"")}});a.documentElement.innerHTML=
c;return a}return c}});e||l(a,"responseText","airborn_responseText",{get:function(){return c}});setTimeout(function(){a.dispatchEvent(new Event("readystatechange"));a.dispatchEvent(new Event("load"))})})}}};g("responseType","airborn_responseType");g("readyState","airborn_readyState");g("status","airborn_status");g("response","airborn_response");g("responseText","airborn_responseText");var m={};airborn.fs.listenForFileChanges(k,function(){Object.keys(m).forEach(function(a){m[a].result&&delete m[a]})});
airborn.path={dirname:function(a){return a.substr(0,a.replace(/\/+$/,"").lastIndexOf("/")+1)},basename:function(a,b){var c=a.substr(a.replace(/\/+$/,"").lastIndexOf("/")+1);return b&&c.substr(-b.length)===b?c.substr(0,c.length-b.length):c},split:function(a){return a.split("/").map(function(a,c,d){return a+(c+1===d.length?"":"/")})},join:function(){return[].join.call(arguments,"")},resolve:function(a,b){if(""===b)return a;if("/"===b[0])return airborn.path.resolve("/",b.substr(1));for(var c=a.replace(/[^/]*$/,
"")+b,d=/([^./]+\/\.\.\/|\/\.(?=\/))/g;d.test(c);)c=c.replace(d,"");return c}};var S=0,da=0;window.addEventListener("load",function(a){S&&(a.stopImmediatePropagation(),S--,da++)});[[HTMLAnchorElement,"href","airborn_href",function(){},function(){}],[HTMLLinkElement,"href","airborn_href",function(){},function(){}],[HTMLAudioElement,"src","airborn_src",function(){},function(){}],[HTMLScriptElement,"src","airborn_src",function(){S++},function(){this.addEventListener("load",function(){da--&&window.dispatchEvent(new Event("load"))})}],
[HTMLImageElement,"src","airborn_src",function(){function a(a){a.stopImmediatePropagation()}var b=Object.getOwnPropertyDescriptor(this,"complete");Object.defineProperty(this,"complete",{get:function(){return!1},configurable:!0});this.addEventListener("error",a);return function(){b?Object.defineProperty(this,"complete",b):delete this.complete;this.removeEventListener("error",a)}}],[HTMLIFrameElement,"src","airborn_src",function(){this.addEventListener("load",function b(c){c.stopImmediatePropagation();
this.removeEventListener("load",b)})},function(){}]].forEach(function(a){var b=a[0],c=a[1],d=a[3],e=a[4];H(b.prototype,c,a[2],function(a,b){return{get:function(){return this.getAttribute(c)||""},set:function(a){var c=this;if(C.test(a))return b.call(c,a);var f=airborn.path.resolve(k,a);Object.keys(F).some(function(a){if(F[a]===f)return b.call(c,a),!0})||(e=d.call(c)||e,ja(a,function(a){b.call(c,a);e.call(c)}))}}});var f=b.prototype.getAttribute;b.prototype.getAttribute=function(a){var b=f.call(this,
a);if(b&&a===c)a:{var d=b;a=this.ownerDocument.baseURI;b=(d.match(N)||[""])[0];d=d.replace(N,"");if(F.hasOwnProperty(d))d=F[d];else{var e=d.indexOf("filename=");if(-1===e){a=oa.test(d)?d+b:airborn.path.resolve(a,d)+b;break a}d=d.substr(e+9);d=decodeURIComponent(d.substr(0,d.indexOf(";")))}a="/"!==d[0]||d.substr(0,k.length)===k?airborn.path.resolve(a,d.replace(M,""))+b:"airbornstorage:"+d+b}else a=b;return a}});g("src","airborn_src");g("href","airborn_href");l(HTMLAnchorElement.prototype,"pathname",
"airborn_pathname",{get:function(){return this.airborn_href&&(new URL(this.airborn_href,"file://")).pathname}});g("pathname","airborn_pathname");H(Element.prototype,"innerHTML","airborn_innerHTML",function(a,b){return{get:a,set:function(a){b.call(this,a);ka(this)}}});g("innerHTML","airborn_innerHTML");var sa=window.open;window.open=function(a){if(C.test(a)){var b=sa.apply(this,arguments);return"blob:null"===a.substr(0,9)||"data:"===a.substr(0,5)?b:L(b)}airborn.wm.openWindow(k,{path:a},null)};var r=
{apps:"/Apps/",music:"/Music/",pictures:"/Pictures/",sdcard:"/Documents/",system:"/Core/",videos:"/Videos/"};h.prototype=new w;X.prototype=new h;window.DOMError||(window.DOMError=function(a,b){Object.defineProperty(this,"name",{value:a});Object.defineProperty(this,"message",{value:b})});n.prototype=new w;n.prototype.onchange=null;n.prototype.available=function(){var a=new h;a.result="available";a.dispatchEvent(new Event("success"));return a};n.prototype.addNamed=function(a,b){var c=J(this,b),d=new h;
airborn.fs.getFile(airborn.path.dirname(c),{codec:"dir"},function(b){b&&b.hasOwnProperty(airborn.path.basename(c))?(d.error=new DOMError("NoModificationAllowedError","The file already exists."),d.dispatchEvent(new Event("error"))):airborn.fs.putFile(c,{codec:"blob"},a,function(a){d.readyState="done";a?d.dispatchEvent(new Event("error")):d.dispatchEvent(new Event("success"))})});return d};n.prototype.get=function(a){var b=J(this,a),c=new h;a=airborn.path.dirname(b);var d=airborn.path.basename(b);airborn.fs.getFile(a,
{codec:"dir"},function(a){a&&a.hasOwnProperty(d)?(c.result=new P({name:O(b),type:a[d].type,path:b,lastModifiedDate:a[d].edited||new Date}),c.dispatchEvent(new Event("success"))):(c.error=new DOMError("NotFoundError","The file doesn't exist."),c.dispatchEvent(new Event("error")))});return c};n.prototype.delete=function(a){a=J(this,a);var b=new h,c=airborn.path.dirname(a),d=airborn.path.basename(a);airborn.fs.getFile(c,{codec:"dir"},function(a){delete a[d];airborn.fs.putFile(c,{codec:"dir"},a,function(){b.dispatchEvent(new Event("success"))})});
return b};n.prototype.enumerate=function(a){var b=J(this,null==a?"":a),c=b.length,d=b.split("/").slice(0,-1).join("/")+"/",e=new X,f=[];(function ra(d,e){airborn.fs.getFile(d,{codec:"dir"},function(g){function k(){++h===l&&e()}var l=0,h=-1;g&&Object.keys(g).forEach(function(e){if(".history/"!==e.substr(-9)){var h=d+e;a&&h.substr(0,c)!==b||("/"===e.substr(-1)?(l++,ra(h,k)):f.push({name:O(h),type:g[e].type,path:h,lastModifiedDate:g[e].edited||new Date}))}});k()})})(d,function(){e.readyState="done";
var a=0;(e.continue=function(){this.result=f[a]&&new P(f[a]);this.done=!f[a];a++;e.dispatchEvent(new Event("success"))}).call(e)});return e};g("result","airborn_result");Q("readAsText",function(a,b){airborn.fs.getFile(a.path,b)});Q("readAsArrayBuffer",function(a,b){airborn.fs.getFile(a.path,{codec:"arrayBuffer"},b)});Q("readAsDataURL",function(a,b){airborn.fs.getFile(a.path,{codec:"base64"},function(c){b("data:"+a.type+";base64,"+c)})});navigator.getDeviceStorage=function(a){if(1!==arguments.length)throw new TypeError("navigator.getDeviceStorage takes exactly one argument: storageName.");
return r[a]?new n(a):null};t.prototype.getItem=function(a){return this.hasOwnProperty(a)?this[a]:null};t.prototype.setItem=function(a,b){this[a]=b+"";K()};t.prototype.removeItem=function(a){delete this[a];K()};t.prototype.clear=function(){var a=this;Object.keys(a).forEach(function(b){delete a[b]});K()};t.prototype.key=function(a){return Object.keys(this)[a]};Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this).length}});var u=new t(document.airborn_localStorage),T;if(window.Proxy)T=
{value:new Proxy(u,{set:function(a,b,c){a.setItem(b,c);return!0},deleteProperty:function(a,b){a.removeItem(b);return!0}})};else{var ea=function(){Object.keys(u).forEach(function(a){u[a]+=""})},fa=function(){ea();K()};T={get:function(){ea();return u}};setInterval(fa,300);window.addEventListener("unload",fa)}delete document.airborn_localStorage;l(window,"localStorage","airborn_localStorage",T);var Y=JSON.stringify(u);Object.defineProperty(document,"airborn_cookie",{value:""});g("cookie","airborn_cookie");
var v=Z(I.replace(M,""));Object.defineProperty(window,"airborn_location",{get:function(){return v}});g("location","airborn_location");if(navigator.userAgent.match(/Safari/)&&!navigator.userAgent.match(/Chrome/)){var ga=window.history;window.History=function(){};try{Object.defineProperty(window,"history",{value:new window.History,enumerable:!0,configurable:!0})}catch(xa){window.history=new window.History}["go","back","forward"].forEach(function(a){window.History.prototype[a]=function(){ga[a].apply(ga,
arguments)}});var ha=[{href:v.href,state:null}],z=0;History.prototype.replaceState=function(a,b,c){D(a,c);ha[z]={href:v.href,state:a};window.location.hash="#_airborn_state_"+z};History.prototype.pushState=function(a,b,c){z++;History.prototype.replaceState.apply(this,arguments)};window.addEventListener("hashchange",function(a){if("#_airborn_state_"===window.location.hash.substr(0,16)&&(a.stopImmediatePropagation(),z!==+window.location.hash.substr(16))){z=+window.location.hash.substr(16);a=ha[z];D(a.state,
a.href);var b=new Event("popstate");Object.defineProperty(b,"state",{value:a.state,enumerable:!0,configurable:!0});window.dispatchEvent(b)}},!0)}else{var ta=History.prototype.replaceState;History.prototype.replaceState=function(a,b,c){D(a,c);ta.call(this,{href:v.href,state:a,_airborn:!0},"","")};var ua=History.prototype.pushState;History.prototype.pushState=function(a,b,c){D(a,c);ua.call(this,{href:v.href,state:a,_airborn:!0},"","")};window.addEventListener("popstate",function(a){a.state&&a.state._airborn&&
(D(a.state.state,a.state.href),Object.defineProperty(a,"state",{value:a.state.state,enumerable:!0,configurable:!0}))},!0)}var R=new Map;Object.defineProperty(window,"airborn_top",{value:function(){for(var a=window;a.parent.parent.parent!==a.parent.parent;)a=a.parent;return x(a)}()});g("top","airborn_top");Object.defineProperty(window,"airborn_parent",{value:window===window.airborn_top?window:x(window.parent)});g("parent","airborn_parent");H(MessageEvent.prototype,"source","airborn_source",function(a){return{get:function(){return x(a.call(this))}}});
g("source","airborn_source");H(HTMLIFrameElement.prototype,"contentWindow","airborn_contentWindow",function(a){return{get:function(){return x(a.call(this))}}});g("contentWindow","airborn_contentWindow");if(window===window.airborn_top){var G=document.querySelector("head > title");airborn.wm.setTitle(G&&G.textContent);document.addEventListener("DOMContentLoaded",function(){if(G=document.querySelector("head > title"))airborn.wm.setTitle(G.textContent),(new window[window.MutationObserver?"MutationObserver":
"WebKitMutationObserver"](function(a){a.forEach(function(a){airborn.wm.setTitle(a.target.textContent)})})).observe(G,{subtree:!0,characterData:!0,childList:!0})})}airborn.top_location=new URL(document.top_location);delete document.top_location;window.MozActivity=function(a){var b=new h;if("pick"===a.name){var c=document.createElement("input");c.type="file";c.accept=a.data.type;c.style.display="none";c.addEventListener("change",function(){b.result={blob:c.files[0]};b.dispatchEvent(new Event("success"))});
document.body.appendChild(c);c.click();document.body.removeChild(c)}else b.error=new DOMError("NotSupportedError","That activity is not supported."),b.dispatchEvent(new Event("error"));return b};aa.prototype=new w;var va=window.Worker;window.Worker=function(a){var b=new aa,c=[];b.postMessage=function(){c.push(arguments)};airborn.fs.prepareUrl(a,{rootParent:k,relativeParent:I,webworker:!0},function(a){var e=new va(a);e.addEventListener("message",b.dispatchEvent.bind(b));b.postMessage=function(){e.postMessage.apply(e,
arguments)};c.forEach(function(a){b.postMessage.apply(b,a)})});return b};var E={};navigator.mozSetMessageHandler=function(a,b){E[a]||(E[a]=[]);E[a].push(b)};var q={},wa={register:function(){var a=new h;airborn.fs.pushRegister(function(b){switch(b.event){case "registered":q[b.result]={pushEndpoint:b.result,version:void 0};a.result=b.result;a.dispatchEvent(new Event("success"));break;case "push":if(!q[b.result.pushEndpoint]||b.result.version<=q[b.result.pushEndpoint].version)break;q[b.result.pushEndpoint]=
{pushEndpoint:b.result.pushEndpoint,version:b.result.version};ba("push",b.result);break;case "push-register":q={},ba("push-register",{})}});return a},unregister:function(a){var b=new h;airborn.fs.pushUnregister(a,function(){delete q[a];b.dispatchEvent(new Event("success"))});return b},registrations:function(){var a=new h;a.result=Object.keys(q).map(function(a){return q[a]});a.dispatchEvent(new Event("success"));return a}};Object.defineProperty(navigator,"push",{get:function(){return wa}})})();
