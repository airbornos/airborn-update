function initPrintView(a,b){b.registerMessageHandler(function(a){printView(a.data.printView)},"printView")}var pages;
function printView(a){var b=window.recordSelection(),d=window.recordScroll();if(a)document.documentElement.setAttribute("_firetext_print_view",""),document.addEventListener("input",printViewOnInput),document.defaultView.addEventListener("resize",printViewOnResize),document.addEventListener("wheel",printViewOnWheel),document.head.appendChild(documentSizeStyle),document.head.appendChild(windowSizeStyle),printViewOnInput({}),printViewOnResize(),document.documentElement.spellcheck=!1,navigator.userAgent.match(/Chrome/)&&
(document.body.innerHTML=document.body.innerHTML),window.setSelection(b),window.setScroll(d);else if(document.documentElement.removeAttribute("_firetext_print_view"),document.removeEventListener("input",printViewOnInput),document.defaultView.removeEventListener("resize",printViewOnResize),document.removeEventListener("wheel",printViewOnWheel),documentSizeStyle.parentElement&&documentSizeStyle.parentElement.removeChild(documentSizeStyle),windowSizeStyle.parentElement&&windowSizeStyle.parentElement.removeChild(windowSizeStyle),
pages=null,wordCountEnabled&&updateWordCountElement(),window.setSelection(b),window.setScroll(d),document.documentElement.spellcheck=!0,navigator.userAgent.match(/Chrome/)){var c=document.getSelection(),e=c.rangeCount&&c.getRangeAt(0);c.removeAllRanges();var f=document.querySelectorAll(blockElementNames.replace("html,",""));(function g(a){if(!c.rangeCount){var b=document.createRange();b.selectNode(f[a]);c.addRange(b);c.removeAllRanges();setTimeout(function(){a+1===f.length?e&&c.addRange(e):g(a+1)})}})(0)}}
var documentSizeStyle=document.createElement("style");documentSizeStyle.setAttribute("_firetext_remove","");
function printViewOnInput(a){documentSizeStyle.textContent="";pages=Math.ceil(document.body.offsetHeight/(document.documentElement.offsetHeight-30));documentSizeStyle.textContent=["html {","\tpadding-right: calc("+(pages-1)+" * (var(--width) - 2 * var(--margin) + 40px) + 40px);","}\nbody {","\theight: "+pages+"00%;","}"].join("\n");a.detail&&printViewOnResize();wordCountEnabled&&updateWordCountElement()}var windowSizeStyle=document.createElement("style");
windowSizeStyle.setAttribute("_firetext_remove","");var scale;function printViewOnResize(){scale=window.innerHeight/(document.documentElement.offsetHeight+30);windowSizeStyle.textContent=["html {","\ttransform: scale("+scale+");","}"].join("\n")}
function printViewOnWheel(a){if(!a.deltaX){var b;switch(a.deltaMode){case WheelEvent.DOM_DELTA_PIXEL:b=a.deltaY;break;case WheelEvent.DOM_DELTA_LINE:b=30*a.deltaY;break;case WheelEvent.DOM_DELTA_PAGE:b=a.deltaY*scale*document.body.clientWidth}document.defaultView.scrollBy(b,0);a.preventDefault()}};
