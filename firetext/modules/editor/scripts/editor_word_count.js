var messageProxy,wordCountEnabled;function initWordCount(a,b){messageProxy=b;messageProxy.registerMessageHandler(function(a){wordCount(a.data.wordCount)},"wordCount")}
function wordCount(a){(wordCountEnabled=a)?(document.addEventListener("input",wordCountOnInput),document.addEventListener("selectionchange",wordCountOnSelectionChange),wordCountOnInput(),wordCountOnSelectionChange()):(document.removeEventListener("input",wordCountOnInput),document.removeEventListener("selectionchange",wordCountOnSelectionChange))}var documentWordCount={},selectionWordCount={};function wordCountOnInput(){documentWordCount=count(document.body.innerText);updateWordCountElement()}
function wordCountOnSelectionChange(){selectionWordCount=count(document.getSelection().toString());updateWordCountElement()}function updateWordCountElement(){messageProxy.postMessage({command:"wordCountData",selection:!document.getSelection().isCollapsed,selectionWordCount:selectionWordCount,documentWordCount:documentWordCount,pages:pages})}
function count(a){for(var b=0,d=0,f=0,e=!0,c=0,g=a.length;c<g;c++)/\s/.test(a[c])?("\n"!==a[c]&&d++,e=!0):(d++,f++,e&&(b++,e=!1));return{words:b,chars:d,charsWithoutSpaces:f}};
